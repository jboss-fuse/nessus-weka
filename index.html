<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="author" content="Thomas Diesler">
<title>Nessus Weka</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Nessus Weka</h1>
<div class="details">
<span id="author" class="author">Thomas Diesler</span><br>
<span id="revnumber">version 1.0.1-SNAPSHOT,</span>
<span id="revdate">2020-01-29</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_getting_weka">1. Getting Weka</a></li>
<li><a href="#_data_inputoutput">2. Data Input/Output</a>
<ul class="sectlevel2">
<li><a href="#_preparing_for_classification">2.1. Preparing for Classification</a></li>
</ul>
</li>
<li><a href="#_classification">3. Classification</a>
<ul class="sectlevel2">
<li><a href="#_zeror">3.1. ZeroR</a></li>
<li><a href="#_oner">3.2. OneR</a></li>
<li><a href="#_splitting_the_data">3.3. Splitting the Data</a></li>
<li><a href="#_oner_trainingtest">3.4. OneR Training/Test</a></li>
<li><a href="#_stratification">3.5. Stratification</a></li>
<li><a href="#_cross_validation">3.6. Cross-Validation</a></li>
<li><a href="#_decision_tree">3.7. Decision Tree</a></li>
<li><a href="#_confusion_matrix">3.8. Confusion Matrix</a></li>
</ul>
</li>
<li><a href="#_camel_weka">4. Camel-Weka</a></li>
<li><a href="#_feedback">5. Feedback</a></li>
<li><a href="#_resources">6. Resources</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2020 The original authors.</p>
</div>
<div class="paragraph">
<p>Welcome to Nessus Weka. This is a collection of examples and tutorials related to the <a href="https://www.cs.waikato.ac.nz/ml/weka" target="_blank" rel="noopener">Weka</a> data mining toolset.</p>
</div>
<div class="paragraph">
<p>Weka is tried and tested open source machine learning software that can be accessed through a graphical user interface, standard terminal applications,
or a Java API. It is widely used for teaching, research, and industrial applications, contains a plethora of built-in tools for standard machine learning tasks,
and additionally gives transparent access to well-known toolboxes such as scikit-learn, R, and Deeplearning4j.</p>
</div>
<div class="paragraph">
<p>In this intro, we&#8217;ll show you how to get started with simple data mining tasks and how to incorporate these into larger <a href="https://camel.apache.org" target="_blank" rel="noopener">Apache Camel</a> workflows.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_weka">1. Getting Weka</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Weka download and install instructions are <a href="https://waikato.github.io/weka-wiki/downloading_weka" target="_blank" rel="noopener">here</a>.</p>
</div>
<div class="paragraph">
<p>When you open Weka, you&#8217;ll initially see two windows.</p>
</div>
<div class="paragraph">
<p>The Weka Chooser</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/getting-weka/weka-chooser.png" alt="Weka Chooser" width="50%">
</div>
</div>
<div class="paragraph">
<p>and the Weka Explorer</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/getting-weka/weka-explorer.png" alt="Weka Explorer">
</div>
</div>
<div class="paragraph">
<p>Following on from here, we mostly explore how to do data mining tasks in Java APIs and in <a href="https://camel.apache.org" target="_blank" rel="noopener">Apache Camel</a> workflows.</p>
</div>
<div class="paragraph">
<p>However, it is Weka that is the source of incredibly comprehensive and powerful data mining functionality.
You may find, once you are more familiar with it, that Java APIs and Camel workflows become an afterthought of what you have decided on using the Weka tools.</p>
</div>
<div class="paragraph">
<p>This isn&#8217;t so much a limitation of Nessus/Camel APIs but quite intentional.
In Nessus, we aim to provide entry points that are general enough to access the full scope of Weka functionality.</p>
</div>
<div class="paragraph">
<p>Without further ado, lets do it &#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_inputoutput">2. Data Input/Output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you get started, it is quite likely that your data isn&#8217;t available (yet) in a format that data mining libraries can use effectively.
Lets asume, you have some <a href="https://raw.githubusercontent.com/tdiesler/nessus-weka/master/part01/data/sfny.csv" target="_blank" rel="noopener">csv data</a> that
you first want to convert into Weka&#8217;s native <a href="https://www.cs.waikato.ac.nz/ml/weka/arff.html" target="_blank" rel="noopener">.arff</a> format.</p>
</div>
<div class="paragraph">
<p>Here is the list of file formats that Weka supports for reading and writing &#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/data-inout/file-formats.png" alt="File Formats" width="50%">
</div>
</div>
<div class="paragraph">
<p>The data that we&#8217;ll be using here, is borrowed from R2D3&#8217;s excellent <a href="http://www.r2d3.us/visual-intro-to-machine-learning-part-1/" target="_blank" rel="noopener">visual introduction to machine learning</a>. We have just short of 500 instances of real estate homes with various attributes assigned to them.</p>
</div>
<div class="paragraph">
<p>Reading data is easy &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.csv")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Converting this into an .arff file is easy too &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">dataset.write("data/sfny.arff")</code></pre>
</div>
</div>
<div class="paragraph">
<p>In fact, because <a href="https://github.com/tdiesler/nessus-weka/tree/master/api/src/main/java/io/nessus/weka/Dataset.java" target="_blank" rel="noopener">Dataset</a> has a functional flow API, we could have done</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset.create("data/sfny.csv").write("data/sfny.arff")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lets open the <a href="https://github.com/tdiesler/nessus-weka/tree/master/part01/data/sfny-numeric.arff" target="_blank" rel="noopener">converted file</a> in the Weka Explorer</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/data-inout/sfny-numeric.png" alt="sfny numeric">
</div>
</div>
<div class="paragraph">
<p>If this is the first time you see a dataset in Weka, I&#8217;ll quickly talk you through what we can learn from this view.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We have 492 data instances with 8 attributes each</p>
</li>
<li>
<p>All attributes are of type numeric</p>
</li>
<li>
<p>Attribute <code>in_sf</code> has two distinct values: 0, 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can assume that this attribute is the so called "instance class".
An attribute value of '1' means a home is in San Francisco, '0' means a home in New York.</p>
</div>
<div class="sect2">
<h3 id="_preparing_for_classification">2.1. Preparing for Classification</h3>
<div class="paragraph">
<p>What we have here, is a very simple form of binary classification (i.e. the home is either in San Francisco or it is not).
The data does not say that yet however. Instead, it only knows about 8 attributes, each of which are numeric.</p>
</div>
<div class="paragraph">
<p>What we want to do next, is to convert the <code>in_sf</code> attribute into a nominal value. The respective nominal values could be "ny" and "sf",
but we leave it as "0" and "1" for now.</p>
</div>
<div class="paragraph">
<p>Weka can apply filters to transform a dataset into another more suitable form.</p>
</div>
<div class="paragraph">
<p>What we want here, is to apply the <code>NumericToNominal</code> attribute filter like this &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// Convert the 'in_sf' attribute to nominal
dataset.apply("NumericToNominal -R first")</code></pre>
</div>
</div>
<div class="paragraph">
<p>and to reorder the attributes such that <code>in_sf</code> becomes the last attribute in the list, like this &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// Move the 'in_sf' attribute to the end
dataset.apply("Reorder -R 2-last,1")</code></pre>
</div>
</div>
<div class="paragraph">
<p>We could have left the class attribute in the first position and set this explicitly to be the class attribute.
Instead, we moved it to the last position where Weka expects to see the class attribute by default.</p>
</div>
<div class="paragraph">
<p>Putting it all together in Nessus API, it looks like this &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset.create("data/sfny.csv")

    // Convert the 'in_sf' attribute to nominal
    .apply("NumericToNominal -R first")

    // Move the 'in_sf' attribute to the end
    .apply("Reorder -R 2-last,1")

    // Reset the relation name
    .apply("RenameRelation -modify sfny")

    // Write out the resulting dataset
    .write("data/sfny.arff");</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you haven&#8217;t done already, lets now open the <a href="https://github.com/tdiesler/nessus-weka/tree/master/part01/data/sfny.arff" target="_blank" rel="noopener">resulting dataset</a> in the Weka Explorer</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/data-inout/sfny-nominal.png" alt="sfny nominal">
</div>
</div>
<div class="paragraph">
<p>If you click on the "Visualize All" button, you&#8217;ll see &#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/data-inout/sfny-visualize.png" alt="sfny visualize">
</div>
</div>
<div class="paragraph">
<p>Which one of those attributes is a good candidate for initial class discrimination? Have a guess &#8230;&#8203;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_classification">3. Classification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With classification, we would ultimately like to tell which class an yet unseen data instance belongs to.
In our case, we would like to to predict whether a home is located in San Fancisco or New York.</p>
</div>
<div class="paragraph">
<p>Lets now build a prediction model, which we train with our knowledge from the data that we have.</p>
</div>
<div class="sect2">
<h3 id="_zeror">3.1. ZeroR</h3>
<div class="paragraph">
<p>But first, lets establish a few base lines which will later help us to assess the quality of our prediction model.</p>
</div>
<div class="paragraph">
<p>The most basic prediction algorithm is <a href="https://www.saedsayad.com/zeror.htm" target="_blank" rel="noopener">ZeroR</a>. It stands for "no rule at all".
It simply counts the number of instances per class and always predicts the class with the highest number of instances.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.arff");

Evaluation eval = dataset

    .classifier("ZeroR")

    .evaluateModel(dataset)

    .getEvaluation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the output for this simple ZeroR analysis</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>ZeroR predicts class value: 1

=== Summary ===

Correctly Classified Instances         268               54.4715 %
Incorrectly Classified Instances       224               45.5285 %
Kappa statistic                          0
Mean absolute error                      0.496
Root mean squared error                  0.498
Relative absolute error                100      %
Root relative squared error            100      %
Total Number of Instances              492</code></pre>
</div>
</div>
<div class="paragraph">
<p>According to ZeroR, every home ever presented is located in San Francisco and it would be correct about that in 54.47% of the cases.
This would be just a little better than tossing a coin (i.e. not very reliable at all).</p>
</div>
<div class="paragraph">
<p>Why is it exactly that number? Well, if you remember our class distribution we have 268 instances in SF and 224 in NY.
ZeroR calculates 268/492 = 0.5447</p>
</div>
<div class="paragraph">
<p>Lets try to build a better model &#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_oner">3.2. OneR</h3>
<div class="paragraph">
<p><a href="https://www.saedsayad.com/oner.htm" target="_blank" rel="noopener">OneR</a> is still a very simple classification algorithm. It stands for "one rule".
Whereas ZeroR did not look at any of the attributes, OneR finds the one attribute that leads to the highest accuracy.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.arff");

Evaluation eval = dataset

    .classifier("OneR")

    .evaluateModel(dataset)

    .getEvaluation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the output for the OneR analysis</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>elevation:
    &lt; 4.5   -&gt; 1
    &lt; 12.5  -&gt; 0
    &lt; 13.5  -&gt; 1
    &lt; 30.5  -&gt; 0
    &gt;= 30.5 -&gt; 1
(407/492 instances correct)

=== Summary ===

Correctly Classified Instances         407               82.7236 %
Incorrectly Classified Instances        85               17.2764 %
Kappa statistic                          0.6553
Mean absolute error                      0.1728
Root mean squared error                  0.4156
Relative absolute error                 34.8303 %
Root relative squared error             83.4643 %
Total Number of Instances              492</code></pre>
</div>
</div>
<div class="paragraph">
<p>A prediction accuracy of 82.72% is quite good. Actually, much better than tossing a coin.</p>
</div>
<div class="paragraph">
<p>Do you rember when I asked you to guess the best descriminator attribute? Here you have it &#8230;&#8203; it is "elevation".</p>
</div>
<div class="paragraph">
<p>But, hang on. Didn&#8217;t we just cheat ourselves? We trained the model with the full dataset and then ask for a prediction using the same dataset.
The model already knew every data instance and could therefore find the ideal boundaries for every attribute.</p>
</div>
<div class="paragraph">
<p>This is called "over fitting". We built a model that works very well for the given dataset, but might be useless for data it hasn&#8217;t seen yet - it learned the data.</p>
</div>
<div class="paragraph">
<p>Lets fix that &#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_splitting_the_data">3.3. Splitting the Data</h3>
<div class="paragraph">
<p>Assuming that we don&#8217;t have another source of data, we need to split up the data that we do have.
A good rule of thumb is perhaps to use 80% for training the model and 20% for evaluating its performance.</p>
</div>
<div class="paragraph">
<p>When you look at <a href="https://github.com/tdiesler/nessus-weka/tree/master/part01/data/sfny.arff" target="_blank" rel="noopener">sfny.arff</a> you will notice that all instances for NY come first, followed by the instances for SF.
Simply using the first 80% of instances for training would not work so well. We therefore randomly reorder the data instances before we do the split.</p>
</div>
<div class="paragraph">
<p>Many of the algorithms in Weka involve a fair bit of randomization. It would however be a nightmare, if we saw different results on every run.
It would also be pointless to show actual figures as we have done so far. The solution is to use an explicit randomization seed.
Given the same seed the randomizer produces the same sequence of numbers - below we use <code>-S 0</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset rndset = Dataset.create("data/sfny.arff")

        .apply("Randomize -S 0")

        .apply("RenameRelation -modify sfny-random")

        .write("data/sfny-random.arff");

int numTotal = rndset.getInstances().numInstances();
int firstTrainIdx = (int) Math.round(numTotal * 0.20);
int lastTestIdx = firstTrainIdx - 1;

Dataset trainset = new Dataset(rndset.getInstances())

        .apply("RemoveRange -R 1-" + lastTestIdx)

        .apply("RenameRelation -modify sfny-train")

        .write("data/sfny-80pct.arff");

Dataset testset = new Dataset(rndset.getInstances())

        .apply("RemoveRange -R " + firstTrainIdx + "-" + numTotal)

        .apply("RenameRelation -modify sfny-test")

        .write("data/sfny-20pct.arff");

Assert.assertEquals(492, rndset.getInstances().numInstances());
Assert.assertEquals(395, trainset.getInstances().numInstances());
Assert.assertEquals(97, testset.getInstances().numInstances());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lets run OneR again &#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_oner_trainingtest">3.4. OneR Training/Test</h3>
<div class="paragraph">
<p>Now that we have split our data in two sets, lets run OneR again &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset training = Dataset.create("data/sfny-80pct.arff");
Dataset testing = Dataset.create("data/sfny-20pct.arff");

Evaluation eval = training

    .classifier("OneR")

    .evaluateModel(testing)

    .getEvaluation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is different, but still much better than ZeroR</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>elevation:
    &lt; 1.5   -&gt; 1
    &lt; 3.5   -&gt; 0
    &lt; 5.5   -&gt; 1
    &lt; 30.5  -&gt; 0
    &gt;= 30.5 -&gt; 1
(325/395 instances correct)

=== Summary ===

Correctly Classified Instances          75               77.3196 %
Incorrectly Classified Instances        22               22.6804 %
Kappa statistic                          0.5473
Mean absolute error                      0.2268
Root mean squared error                  0.4762
Relative absolute error                 45.9273 %
Root relative squared error             96.2495 %
Total Number of Instances               97</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have a model that is still very simple, but would likely work in more than 3/4 of all cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stratification">3.5. Stratification</h3>
<div class="paragraph">
<p>Because we used a random process to split our data there is chance that we introduced some skew. How would our model be effected if the training/test data
did not have the same class distribution as the full dataset. Lets say, the training set had a significant higher percentage of SF homes than the test set.
It this case, the model would likely be biased on SF homes.</p>
</div>
<div class="paragraph">
<p>There is a method that can split our data in a "supervised" way, such that the class value distribution it taken into account.</p>
</div>
<div class="paragraph">
<p>Lets try that as well &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.arff")

        // Push the full dataset to the stack
        .push()

        .apply("StratifiedRemoveFolds -N 5")

        .apply("RenameRelation -modify sfny-test")

        .write("data/sfny-20pct-strat.arff")

        .pushTestSet()

        // Pop the full dataset from the stack
        .pop()

        .apply("StratifiedRemoveFolds -N 5 -V")

        .apply("RenameRelation -modify sfny-train")

        .write("data/sfny-80pct-strat.arff")

        .pushTrainingSet();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Above, we use the concept of named dataset slots from the Dataset API. It simply means that a Dataset can maintain a theoretically unlimmited number
of named Weka Instances. And because the split into "training/testing" is so common, we have explicit methods to push/pop those.</p>
</div>
<div class="paragraph">
<p>Running OneR using a stratified data split, gives us &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>elevation:
    &lt; 4.5   -&gt; 1
    &lt; 12.5  -&gt; 0
    &lt; 14.5  -&gt; 1
    &lt; 25.5  -&gt; 0
    &gt;= 25.5 -&gt; 1
(323/393 instances correct)

=== Summary ===

Correctly Classified Instances          81               81.8182 %
Incorrectly Classified Instances        18               18.1818 %
Kappa statistic                          0.6333
Mean absolute error                      0.1818
Root mean squared error                  0.4264
Relative absolute error                 36.6589 %
Root relative squared error             85.6347 %
Total Number of Instances               99</code></pre>
</div>
</div>
<div class="paragraph">
<p>I guess an almost 5% improvement is significant. Do we already trust this model?</p>
</div>
</div>
<div class="sect2">
<h3 id="_cross_validation">3.6. Cross-Validation</h3>
<div class="paragraph">
<p>You might think OneR is quite boring and there is only so much improvement you can do using this algorithm.
Well yes, you might be right about this, but we are not quite there yet &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>The stratified split above divides the data into five "folds" it reserves one fold (i.e. 20%) for testing and uses the other four folds for training the model.
We could also have used 10 folds and we could have done the whole process over and over again using a different random seeds every time. At the end, we could
have averaged the results that we thus obtained and only then go to the pub with high confidence in our model.</p>
</div>
<div class="paragraph">
<p>Lets finally do that and see what it gives us &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.arff");

Evaluation eval = dataset

    .classifier("OneR")

    .crossValidateModel(10, 1)

    .getEvaluation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, this is really not a lot of code. All data splitting, stratification and re-building the model several time is done under the hood.
This is also the default method that Weka uses when you open a dataset and run any classifier with default options.</p>
</div>
<div class="paragraph">
<p>Finally, this is what we get &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>elevation:
    &lt; 4.5   -&gt; 1
    &lt; 12.5  -&gt; 0
    &lt; 13.5  -&gt; 1
    &lt; 30.5  -&gt; 0
    &gt;= 30.5 -&gt; 1
(407/492 instances correct)

=== Summary ===

Correctly Classified Instances         379               77.0325 %
Incorrectly Classified Instances       113               22.9675 %
Kappa statistic                          0.5401
Mean absolute error                      0.2297
Root mean squared error                  0.4792
Relative absolute error                 46.3022 %
Root relative squared error             96.2313 %
Total Number of Instances              492</code></pre>
</div>
</div>
<div class="paragraph">
<p>Interestingly enough, the model configuration is quite similar to our own stratified split and the result quite similar to our own percentage split.
I guess, we&#8217;ve just been lucky in the way we split the data. Anyhow, I&#8217;d say this is OneR with a good level of confidence.</p>
</div>
<div class="paragraph">
<p>How about, building a model that works on multiple attributes &#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_decision_tree">3.7. Decision Tree</h3>
<div class="paragraph">
<p>Lets meet <a href="https://en.wikipedia.org/wiki/C4.5_algorithm" target="_blank" rel="noopener">J48</a>, "a landmark decision tree program that is probably the machine learning workhorse most widely used in practice to date" ()</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Dataset dataset = Dataset.create("data/sfny.arff");

Evaluation eval = dataset

    .classifier("J48")

    .crossValidateModel(10, 1)

    .getEvaluation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the default 10-fold cross-validation method it performs significantly better than OneR.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>J48 pruned tree
------------------

elevation &lt;= 32
|   price_per_sqft &lt;= 1072
|   |   year_built &lt;= 1972
|   |   |   beds &lt;= 1
|   |   |   |   sqft &lt;= 756: 0 (28.0)
|   |   |   |   sqft &gt; 756
|   |   |   |   |   sqft &lt;= 784: 1 (2.0)
|   |   |   |   |   sqft &gt; 784
|   |   |   |   |   |   sqft &lt;= 1063: 0 (5.0)
|   |   |   |   |   |   sqft &gt; 1063
|   |   |   |   |   |   |   price_per_sqft &lt;= 750: 1 (2.0)
|   |   |   |   |   |   |   price_per_sqft &gt; 750: 0 (2.0)
|   |   |   beds &gt; 1
|   |   |   |   price_per_sqft &lt;= 829
|   |   |   |   |   elevation &lt;= 10
|   |   |   |   |   |   year_built &lt;= 1924: 0 (4.0)
|   |   |   |   |   |   year_built &gt; 1924: 1 (2.0)
|   |   |   |   |   elevation &gt; 10: 1 (13.0)
|   |   |   |   price_per_sqft &gt; 829
|   |   |   |   |   price_per_sqft &lt;= 1002: 0 (12.0)
|   |   |   |   |   price_per_sqft &gt; 1002: 1 (3.0/1.0)
|   |   year_built &gt; 1972: 1 (46.0/3.0)
|   price_per_sqft &gt; 1072
|   |   elevation &lt;= 4
|   |   |   bath &lt;= 2.5
|   |   |   |   year_built &lt;= 2005: 0 (6.0/1.0)
|   |   |   |   year_built &gt; 2005: 1 (7.0/1.0)
|   |   |   bath &gt; 2.5: 0 (10.0/2.0)
|   |   elevation &gt; 4
|   |   |   price_per_sqft &lt;= 1379
|   |   |   |   year_built &lt;= 2008
|   |   |   |   |   beds &lt;= 3: 0 (42.0/4.0)
|   |   |   |   |   beds &gt; 3: 1 (3.0/1.0)
|   |   |   |   year_built &gt; 2008: 1 (6.0)
|   |   |   price_per_sqft &gt; 1379: 0 (110.0/2.0)
elevation &gt; 32
|   price &lt;= 569000
|   |   year_built &lt;= 1916: 1 (5.0)
|   |   year_built &gt; 1916
|   |   |   year_built &lt;= 1948: 0 (4.0)
|   |   |   year_built &gt; 1948: 1 (5.0/1.0)
|   price &gt; 569000: 1 (175.0/3.0)

Number of Leaves  :     22

Size of the tree :  43

=== Summary ===

Correctly Classified Instances         420               85.3659 %
Incorrectly Classified Instances        72               14.6341 %
Kappa statistic                          0.7069
Mean absolute error                      0.1727
Root mean squared error                  0.3601
Relative absolute error                 34.8079 %
Root relative squared error             72.3008 %
Total Number of Instances              492</code></pre>
</div>
</div>
<div class="paragraph">
<p>An accuracy of 85.37% with an high level of confidence in the model, is quite good I&#8217;d say.</p>
</div>
<div class="paragraph">
<p>When you right-click on the classification result, you can see the tree model visualized. Please note, that J48 also chooses "elevation" as the initial discriminator.
Each split is then performed such that it yields to the maximum of information gain.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/classification/j48-tree.png" alt="J48 Tree">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_confusion_matrix">3.8. Confusion Matrix</h3>
<div class="paragraph">
<p>To be done &#8230;&#8203;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_camel_weka">4. Camel-Weka</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Camel-Weka moves this functionality one level up and provides Weka Data Minig as part of a <a href="https://camel.apache.org/" target="_blank" rel="noopener">Camel</a> workflow. There are hundreds of components available in Camel. Data can be obtained from a wide array of data sources, then be passed on to the Camel-Weka component for analysis and desicion making with the results
yet again being passed on to other components for further processing.</p>
</div>
<div class="paragraph">
<p>This first example shows how to read a CSV file with the file component and then
pass it on to Weka. In Weka we apply a few filters to the data set and then pass it on to
the file component for writing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">CamelContext camelctx = new DefaultCamelContext();
camelctx.addRoutes(new RouteBuilder() {

    @Override
    public void configure() throws Exception {

        // Use the file component to read the CSV file
        from("file:src/test/resources/data?fileName=sfny.csv&amp;noop=true")

        // Convert the 'in_sf' attribute to nominal
        .to("weka:filter?apply=NumericToNominal -R first")

        // Move the 'in_sf' attribute to the end
        .to("weka:filter?apply=Reorder -R 2-last,1")

        // Rename the relation
        .to("weka:filter?apply=RenameRelation -modify sfny")

        // Use the file component to write the Arff file
        .to("file:target/data?fileName=sfny.arff")
    }
});
camelctx.start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second example does the same as above without use of the file component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">CamelContext camelctx = new DefaultCamelContext();
camelctx.addRoutes(new RouteBuilder() {

    @Override
    public void configure() throws Exception {

        from("direct:start")

        // Use Weka to read the CSV file
        .to("weka:read?path=src/test/resources/data/sfny.csv")

        // Convert the 'in_sf' attribute to nominal
        .to("weka:filter?apply=NumericToNominal -R first")

        // Move the 'in_sf' attribute to the end
        .to("weka:filter?apply=Reorder -R 2-last,1")

        // Rename the relation
        .to("weka:filter?apply=RenameRelation -modify sfny")

        // Use Weka to write the Arff file
        .to("weka:write?path=target/data/sfny.arff");
    }
});
camelctx.start();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_feedback">5. Feedback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For feedback, suggestions, request, etc. please go to  &#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/tdiesler/nessus-weka/issues" target="_blank" rel="noopener">Issue Tracker</a></p>
</li>
<li>
<p><a href="https://github.com/tdiesler/nessus-weka/tree/master/docs/src/guide" target="_blank" rel="noopener">Documentation Sources</a></p>
</li>
<li>
<p><a href="https://github.com/tdiesler/nessus-weka/tree/master/part01/src/test/java/io/nessus/weka/test/part01" target="_blank" rel="noopener">Example Code</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">6. Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.cs.waikato.ac.nz/ml/weka/book.html" target="_blank" rel="noopener">Practical Machine Learning Tools and Techniques</a></p>
</li>
<li>
<p><a href="https://www.cs.waikato.ac.nz/ml/weka/courses.html" target="_blank" rel="noopener">Machine Learning Courses</a></p>
</li>
<li>
<p><a href="https://waikato.github.io/weka-wiki/documentation/" target="_blank" rel="noopener">Weka Documentation</a></p>
</li>
<li>
<p><a href="https://github.com/tdiesler/nessus-weka" target="_blank" rel="noopener">Nessus-Weka</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.1-SNAPSHOT<br>
Last updated 2020-01-29 15:42:33 CET
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>